<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://jakarta.ee/xml/ns/jakartaee
                             http://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd"
         version="6.0">

    <!-- 1. Configuration for Login Servlet -->
    <servlet>
        <servlet-name>LoginController</servlet-name>
        <servlet-class>com.myapp.controller.LoginServlet</servlet-class>
        <!-- Load the Servlet when the application starts (optional, but good practice) -->
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginController</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>

    <!-- 2. Configuration for Logout Servlet -->
    <servlet>
        <servlet-name>LogoutController</servlet-name>
        <servlet-class>com.myapp.controller.LogoutServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LogoutController</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>

    <!-- 3. Session Configuration -->
    <!-- Defines how long a user's session remains active after their last request (in minutes) -->
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <!-- 4. Welcome File List -->
    <!-- Defines the default page to load when the user hits the root URL (e.g., http://localhost:8080/myapp/) -->
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>

    <!-- 5. Error Page Handling (Best Practice) -->
    <!-- Define a custom page for common errors like 404 Not Found or 500 Internal Server Error -->
    <error-page>
        <error-code>404</error-code>
        <location>/error/404.jsp</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/error/500.jsp</location>
    </error-page>

    <!-- 6. Security Constraint (Recommended for securing resources) -->
    <!-- This demonstrates how to protect the dashboard page from unauthenticated access. -->
    <!-- NOTE: For session-based authentication like this, you generally need a Java Filter (AuthenticationFilter.java) -->
    <!-- as outlined in the roadmap. This section is more for *declarative* security in full J2EE environments. -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Secured Pages</web-resource-name>
            <!-- Protect all JSPs or a specific path -->
            <url-pattern>/dashboard/*</url-pattern> 
            <url-pattern>*.jsp</url-pattern>
        </web-resource-collection>
        <!-- Disallow access to the protected area unless the user is in a specific role (Requires a Java EE security setup) -->
        <!-- <auth-constraint>
            <role-name>user</role-name>
        </auth-constraint> -->
    </security-constraint>

<servlet>
    <servlet-name>AdminLoginServlet</servlet-name>
    <servlet-class>com.tracker.servlet.AdminLoginServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>AdminLoginServlet</servlet-name>
    <url-pattern>/adminLogin</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>LogoutServlet</servlet-name>
    <servlet-class>com.tracker.servlet.LogoutServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>LogoutServlet</servlet-name>
    <url-pattern>/logout</url-pattern>
</servlet-mapping>
<filter>
    <filter-name>AdminSecurityFilter</filter-name>
    <filter-class>com.tracker.filter.AdminSecurityFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>AdminSecurityFilter</filter-name>
    <url-pattern>/adminDashboard.jsp</url-pattern>
</filter-mapping>

</web-app>